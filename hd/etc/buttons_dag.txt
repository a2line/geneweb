<!-- $Id: buttons_dag.txt v7.xx exp 03/02/2022 16:40:26 $ -->
<!-- Copyright (c) 1998-2022 INRIA -->
%( Boutons de configurations et d’options pour les arbres descendants et DAG %)
%define;urlv(x,y)
  %urlv.x.y;
%end;
%let;evarv;%if;(evar.v!="")%evar.v;%else;3%end;%in;
%let;maxlev;
  %if;(evar.m="A")
    %apply;min%with;%if;(bvar.max_anc_tree!="")%bvar.max_anc_tree;%end;
               %and;%if;(bvar.max_anc_level!="")%bvar.max_anc_level;%end;
               %and;%static_max_anc_level;%end;
  %elseif;(evar.m="D")
    %apply;min%with;%if;(bvar.max_desc_tree!="")%bvar.max_desc_tree;%end;
               %and;%if;(bvar.max_desc_level!="")%bvar.max_desc_level;%end;
               %and;%static_max_desc_level;%end;
  %end;
%in;
%let;maxv;%if;(maxlev<10 or maxlev<evarv+5)%expr(maxlev+1)
          %elseif;(maxlev>=evarv+5 and evarv>5)%expr(evarv+5)
          %else;10%end;%in;
%let;minv;%if;(maxlev>9 and maxlev<evarv+5)%expr(maxv-9)
          %elseif;(maxlev>9 and evarv>5)%expr(evarv-4)
          %else;1%end;%in;
%( minv %minv; < evarv %evarv; < maxv %maxv; (maxlev %maxlev;) %)
%if;(evar.m="A" or evar.m="D")
  <div class="btn-toolbar %if;(evar.m="D" or evar.dag="on")mt-2%end;" role="toolbar" arial-label="dag config buttons toolbar">
    <div class="btn-group border rounded mr-2 pb-0" role="group" aria-label="ascendant tree buttons group">
      <a role="button" href="%prefix_base_password;%foreach;env_binding;%if;(env.key!="m" and env.key!="t" and env.key!="dag")%env.key=%env.val;&%end;%end;m=A&t=A"
        class="btn btn-outline-primary border-%if;(evar.t!="A")0%else;2 disabled font-weight-bold%end;"
        title="[*male line/female line]0"><i class="fas fa-mars fa-lg"></i><br>Agnatus</a>
      <a role="button" href="%prefix_base_password;%foreach;env_binding;%if;(env.key!="m" and env.key!="t" and env.key!="dag")%env.key=%env.val;&%end;%end;m=A&t=C"
        class="btn btn-outline-primary border-%if;(evar.t!="C")0%else;2 disabled font-weight-bold%end;"
        title="[*male line/female line]1"><i class="fas fa-venus fa-lg"></i><br>Cognatus</a>
      <a role="button" href="%prefix_base_password;%foreach;env_binding;%if;(env.key!="m" and env.key!="t")%env.key=%env.val;&%end;%end;m=A&t=T"
        class="btn btn-outline-primary border-%if;(evar.m="A" and evar.t="T")2 disabled font-weight-bold%else;0%end;"
        title="[*ascendants tree]"><i class="fas fa-sitemap fa-rotate-180 fa-lg"></i><br>[*tree] asc.</a>
     </div>
     <div class="btn-group border rounded mr-2">
       <a role="button" class="btn btn-outline-%if;(evar.dag="on")primary font-weight-bold border-2%elseif;(evar.t="C" or evar.t="A" or evar.t="TV")dark disabled border-0%else;primary border-0%end;" 
          href="%if;(evar.dag="")%urlv.dag.on;%else;%urlv.dag;%end;"
          title="%if;(evar.dag="")[*dag on/dag off]0%else;[*dag on/dag off]1%end; ([dag])">
          <i class="fa fa-random fa-fw fa-lg"></i><br>Dag</a>
     </div>
     <div class="btn-group border rounded mr-2" role="group" aria-label="descendant tree buttons group">
        <a role="button" href="%prefix_base_password;%foreach;env_binding;%if;(env.key!="m" and env.key!="t")%env.key=%env.val;&%end;%end;m=D&t=T"
         class="btn btn-outline-primary border-%if;(evar.m="D" and evar.t="T")2 disabled font-weight-bold%else;0%end;"
          title="[*descendants tree]"><i class="fas fa-sitemap fa-lg"></i><br>[*tree] desc.</a>
        <a role="button" class="btn btn-outline-primary border-%if;(evar.m="D" and evar.t="TV" and evar.oi=""))2 disabled font-weight-bold%else;0%end;"
          href="%prefix_base_password;%foreach;env_binding;%if;(env.key!="m" and env.key!="t" and env.key!="dag" and env.key!="oi")%env.key=%env.val;&%end;%end;m=D&t=TV"
          title="%if;(evar.t="T")[*visualize/show/hide/summary]2%else;[*visualize/show/hide/summary]1%end; [compact form]"><i class="fas fa-compress fa-lg"></i><br>Compact</a>
    </div>
    <div class="">
    <div class="btn-group border rounded" role="group" aria-label="generation pickup buttons group">
      <span class="btn btn-primary disabled border rounded-left py-0">[*generation/generations]0</span>

      %if;(maxlev>9 and evarv>5)
        <a role="button" href="%apply;urlv%with;v%and;%expr(evarv-1)%end;"
          class="btn btn-sm border-0 px-0 small"
          title="(-1) [visualize/show/hide/summary]1 %expr(evarv-5) [generation/generations]1 (max %maxlev;)"> -⁵</a>
        <a role="button" href="%apply;urlv%with;v%and;%expr(evarv-5)%end;"
          class="btn btn-sm border-0 px-0 small"
          title="(-5) [visualize/show/hide/summary]1 %expr(evarv-1) [generation/generations]1 (max %maxlev;)"> -</a>
      %end;
      %for;i;minv;maxv;
        <a role="button" id="v%i;" class="btn px-2 py-0 btn-outline-primary border-%if;(evarv=i)2 rounded disabled font-weight-bold%else;0%end;" %if;(evarv!=i)href="%apply;urlv%with;v%and;%expr(i)%end;"%end;
          title="%if;(evarv!=i)[*visualize/show/hide/summary]1 %i; %if;(i=1)[generation/generations]0%else;[generation/generations]1%end;
          %end; %if;(i=maxlev)(max)%end;">%i;%(%if;(evarv=i)<br>^%end;%)</a>
      %end;
      %if;(maxlev>9 and maxlev-evarv>=5)
        <a role="button" href="%apply;urlv%with;v%and;%expr(evarv+1)%end;"
          class="btn btn-outline-primary font-weight-bold border-0 px-2 py-0"
          title="(+1) [visualize/show/hide/summary]1 %expr(evarv+1) [generation/generations]1 (max %maxlev;)">+</a>
        %(<a role="button" href="%apply;urlv%with;v%and;%expr(evarv+5)%end;"
          class="btn btn-outline-primary font-weight-bold border-0 px-1"
          title="(+5) [visualize/show/hide/summary]1 %expr(evarv+5) [generation/generations]1 (max %maxlev;)">+5</a>%)
      %end;
    </div>
    <div class="d-flex align-self-center border rounded mt-1">
      <div class="border rounded mr-1">
        <a role="button" class="btn btn-sm btn-outline-primary border-%if;(e.im="")2%else;0%end;"
          href="%if;(e.im="")%urlv.im.off;%else;%urlv.im;%end;"
          title="%if;(e.im="")[*visualize/show/hide/summary]2%else;[*visualize/show/hide/summary]1%end; [image/images]1"><i class="fa fa-image fa-sm mr-1"></i>[*image/images]1
        </a>
      </div>
      <div class="border rounded mr-1">
        <a role="button" class="btn btn-sm btn-outline-primary border-%if;(e.sp="")2%else;0%end;%if;(not (evar.m="D" and evar.t="TV")) disabled border-0%end;""
          href="%if;(e.sp="")%urlv.sp.off;%else;%urlv.sp;%end;"
          title="%if;(e.sp="")[*visualize/show/hide/summary]2%else;%nn;
            [*visualize/show/hide/summary]1%end; [spouse/spouses]1">
          <i class="fa fa-user-plus fa-sm mr-1"></i>[*spouse/spouses]1
        </a>
      </div>
      %( TODO: to implement on m="D", no actual effect on graphs ! %)
      %if;(evarv>1)
        <div class="border rounded mr-1">
          <a role="button" class="btn btn-sm btn-outline-primary border-%if;(e.ma="" or evar.m="D")0%else;2%end;%if;(evar.dag="on" or evar.m="D") disabled%(?%)%end;"
            href="%if;(e.ma="")%urlv.ma.on;%else;%urlv.ma;%end;"
            title="%if;(e.ma="")[*visualize/show/hide/summary]2%nn;
                 %else;[*visualize/show/hide/summary]1%end; [date of marriage]">
            <i class="fa fa-venus-mars fa-sm mr-1"></i>[*marriage/marriages]1
          </a>
        </div>
      %end;
      <a role="button" class="btn btn-sm mr-2" href="%url;&cgl=on" target="_blank">
        <i class="fa fa-unlink fa-sm" title="[*cancel GeneWeb links]"></i></a>
      %if;(evar.slices!="on" and evar.notab!="on" and evar.t!="TV")
        <a role="button" class="btn btn-sm"
        href="%prefix_base_password;%foreach;env_binding;%env.key;=%env.val;&%end;notab=on&slices=on" accesskey="/"
        title="[*display by slices/slice width/overlap/total width]0">//</a>
      %end;
    </div></div>
  </div>
%elseif;(evar.m="RLM")
  <div class="d-flex justify-content-between">
    <div class="mt-2 mb-4 h2">[*multi relations graph]</div>
    <div class="btn-toolbar mt-4 mr-2" role="toolbar"aria-label="Toolbar for dag/images/edit tree buttons" style='%if;(evar.wide="on")transform:translateX(-40px)%end;'>
      <div class="btn-group ml-2">
        %if;plugin.v7;
         <a role="button" href="%prefix_base_password;m=TP&v=upd%evar.m;&%nn;
           %foreach;env_binding;%if(env.key!="m" and env.val!="")%env.key;=%env.val;&%end;%end;">
          <span class="far fa-edit fa-lg mb-1" title="[*edit tree]"></span>
         </a>
        %else;
          <a role="button" href="%prefix_base_password;m=U;et=S;i=2;%nn;
            %foreach;env_binding;%if;(env.key!="m" and env.val!="")%env.key;=%env.val;;%end;%end;%nn;
            mode=%evar.m;;upddag=on;">
            <span class="far fa-edit fa-lg mb-1" title="[*edit tree]"></span>
          </a>
        %end;
      </div>
    </div>
  </div>
%end;
