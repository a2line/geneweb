<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Filesystem (geneweb.Filesystem)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">geneweb</a> &#x00BB; Filesystem</nav><header class="odoc-preamble"><h1>Module <code><span>Filesystem</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-File_error"><a href="#exception-File_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">File_error</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_file"><a href="#val-create_file" class="anchor"></a><code><span><span class="keyword">val</span> create_file : <span><span class="optlabel">?required_perm</span>:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_file ?required_perm ~kind path</code> creates a file at <code>path</code> if the target does not exist.</p><p>The default permissions are 0o644. In absence of required permissions, we do not check the permissions of the target.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-File_error"><code>File_error</code></a> <p>if the target exists but it is not a regular file or the target file does not fulfill the required permissions.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_dir"><a href="#val-create_dir" class="anchor"></a><code><span><span class="keyword">val</span> create_dir : <span><span class="optlabel">?parent</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?required_perm</span>:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_dir ?parent ?required_perm ~kind path</code> creates a directory at <code>path</code> if the target does not exist.</p><p>The default permissions are 0o755. In absence of required permissions, we do not check the permissions of the target.</p><p>If <code>parent</code> is <code>true</code>, the function also creates all the intermediate entries of the path that do not exist with the same permissions. Notice that in this case the function does not behave exactly as the Unix command `mkdir -p`. In particular it does not support relative paths which involve dot-dot entries.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-File_error"><code>File_error</code></a> <p>if one of the entry in the path exists but it is not a directory or the target directory does not fulfill the required permissions.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>on empty path.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-entry"><a href="#type-entry" class="anchor"></a><code><span><span class="keyword">type</span> entry</span><span> = </span></code><ol><li id="type-entry.File" class="def variant constructor anchored"><a href="#type-entry.File" class="anchor"></a><code><span>| </span><span><span class="constructor">File</span> <span class="keyword">of</span> string</span></code></li><li id="type-entry.Dir" class="def variant constructor anchored"><a href="#type-entry.Dir" class="anchor"></a><code><span>| </span><span><span class="constructor">Dir</span> <span class="keyword">of</span> string</span></code></li><li id="type-entry.Exn" class="def variant constructor anchored"><a href="#type-entry.Exn" class="anchor"></a><code><span>| </span><span><span class="constructor">Exn</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-entry.path" class="def record field anchored"><a href="#type-entry.path" class="anchor"></a><code><span>path : string;</span></code></li><li id="type-entry.exn" class="def record field anchored"><a href="#type-entry.exn" class="anchor"></a><code><span>exn : exn;</span></code></li><li id="type-entry.bt" class="def record field anchored"><a href="#type-entry.bt" class="anchor"></a><code><span>bt : <span class="xref-unresolved">Stdlib</span>.Printexc.raw_backtrace;</span></code></li></ol><code><span>}</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-walk_folder"><a href="#val-walk_folder" class="anchor"></a><code><span><span class="keyword">val</span> walk_folder : <span><span class="optlabel">?recursive</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-entry">entry</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>walk_folder ~recursive f dir</code> applies <code>f</code> to each regular file or directory within <code>dir</code>.</p><p>The iterator yields:</p><ul><li><code>File path</code> for each regular file,</li><li><code>Dir path</code> for each subdirectory, where <code>path</code> is the relative path to the item within <code>dir</code>.</li></ul><p>If an exception is raised while accessing an entry, the iterator yields <code>Exn { path; exn; bt }</code> where:</p><ul><li><code>path</code> is the relative path of the entry,</li><li><code>exn</code> is the raised exception,</li><li><code>bt</code> is the raw backtrace associated with this exception,</li></ul><p>If <code>recursive</code> is <code>true</code>, subdirectories are explored recursively. The default is <code>false</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy_file"><a href="#val-copy_file" class="anchor"></a><code><span><span class="keyword">val</span> copy_file : <span><span class="optlabel">?perm</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?overwrite</span>:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>copy_file ?perm ?overwrite src dst</code> copies the file <code>src</code> into the destination <code>dst</code>. The file <code>dst</code> is created with permissions <code>perm</code>. The default permission value is <code>0o640</code>.</p><p>If <code>overwrite</code> is <code>true</code> (default), existing destination files are overwritten. If <code>overwrite</code> is <code>false</code>, the function fails if the destination already exists.</p><p>This function can be used to copy binary files.</p></div></div></div></body></html>
