<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dag (geneweb.Geneweb.Dag)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">geneweb</a> &#x00BB; <a href="../index.html">Geneweb</a> &#x00BB; Dag</nav><header class="odoc-preamble"><h1>Module <code><span>Geneweb.Dag</span></code></h1><p>DAG construction from URL parameters for genealogical graph display.</p><p>This module builds directed acyclic graphs (DAGs) from URL parameters specifying persons and their Sosa numbers. The resulting DAG can then be rendered as an HTML table via <a href="../Dag2html/index.html"><code>Dag2html</code></a> and <a href="../DagDisplay/index.html"><code>DagDisplay</code></a>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Iperset"><a href="#module-Iperset" class="anchor"></a><code><span><span class="keyword">module</span> Iperset</span><span> : <span class="xref-unresolved">Stdlib</span>.Set.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">elt</span> = <span class="xref-unresolved">Geneweb_db</span>.Driver.iper</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Ipermap"><a href="#module-Ipermap" class="anchor"></a><code><span><span class="keyword">module</span> Ipermap</span><span> : <span class="xref-unresolved">Stdlib</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">Geneweb_db</span>.Driver.iper</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_dag_elems"><a href="#val-get_dag_elems" class="anchor"></a><code><span><span class="keyword">val</span> get_dag_elems : 
  <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-base">Geneweb_db.Driver.base</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-iper">Geneweb_db.Driver.iper</a> list</span></span></code></div><div class="spec-doc"><p><code>get_dag_elems conf base</code> extracts person identifiers from URL parameters.</p><p>Reads indexed parameter pairs from the URL:</p><ul><li><code>i1</code>, <code>i2</code>, ... or <code>p1/n1/oc1</code>, <code>p2/n2/oc2</code>, ... : person identifiers</li><li><code>s1</code>, <code>s2</code>, ... : Sosa numbers relative to each person</li></ul><p>For each (person, sosa) pair, collects all ancestors along the Sosa branch. Returns the union of all collected persons without duplicates.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-sum"><a href="#type-sum" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) sum</span></span><span> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Def/index.html#type-choice">Def.choice</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_dag"><a href="#val-make_dag" class="anchor"></a><code><span><span class="keyword">val</span> make_dag : 
  <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-base">Geneweb_db.Driver.base</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../Geneweb_db/Driver/index.html#type-iper">Geneweb_db.Driver.iper</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../Geneweb_db/Driver/index.html#type-iper">Geneweb_db.Driver.iper</a>, int)</span> <a href="../../Def/index.html#type-choice">Def.choice</a></span> <a href="../Dag2html/index.html#type-dag">Dag2html.dag</a></span></span></code></div><div class="spec-doc"><p><code>make_dag conf base ipers</code> builds a DAG from a list of person identifiers.</p><p>The DAG structure:</p><ul><li>Each person in <code>ipers</code> becomes a node with <code>valu = Left iper</code></li><li>Parent/child links are restricted to persons within <code>ipers</code></li><li>Couples without common children in <code>ipers</code> get a synthetic &quot;spouse node&quot; with <code>valu = Right n</code> to maintain graph connectivity</li></ul><p>Uses <a href="Ipermap/index.html"><code>Ipermap</code></a> internally for efficient iper-to-idag lookup.</p></div></div></div></body></html>
