<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GWPARAM (geneweb.Geneweb.GWPARAM)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">geneweb</a> &#x00BB; <a href="../index.html">Geneweb</a> &#x00BB; GWPARAM</nav><header class="odoc-preamble"><h1>Module <code><span>Geneweb.GWPARAM</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-nb_errors"><a href="#val-nb_errors" class="anchor"></a><code><span><span class="keyword">val</span> nb_errors : <span>int <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-errors_undef"><a href="#val-errors_undef" class="anchor"></a><code><span><span class="keyword">val</span> errors_undef : <span><span>string list</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-errors_other"><a href="#val-errors_other" class="anchor"></a><code><span><span class="keyword">val</span> errors_other : <span><span>string list</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_vars"><a href="#val-set_vars" class="anchor"></a><code><span><span class="keyword">val</span> set_vars : <span><span>string list</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gwd_cmd"><a href="#val-gwd_cmd" class="anchor"></a><code><span><span class="keyword">val</span> gwd_cmd : <span>string <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cnt_dir"><a href="#val-cnt_dir" class="anchor"></a><code><span><span class="keyword">val</span> cnt_dir : <span>string <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sock_dir"><a href="#val-sock_dir" class="anchor"></a><code><span><span class="keyword">val</span> sock_dir : <span>string <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bases"><a href="#val-bases" class="anchor"></a><code><span><span class="keyword">val</span> bases : <span>string <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reorg"><a href="#val-reorg" class="anchor"></a><code><span><span class="keyword">val</span> reorg : <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>set to true when base is in reorg format</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-force"><a href="#val-force" class="anchor"></a><code><span><span class="keyword">val</span> force : <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>force creation of database if already existing</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-config_reorg"><a href="#val-config_reorg" class="anchor"></a><code><span><span class="keyword">val</span> config_reorg : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-config_legacy"><a href="#val-config_legacy" class="anchor"></a><code><span><span class="keyword">val</span> config_legacy : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-my_fun_2"><a href="#type-my_fun_2" class="anchor"></a><code><span><span class="keyword">type</span> my_fun_2</span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-my_fun_3"><a href="#type-my_fun_3" class="anchor"></a><code><span><span class="keyword">type</span> my_fun_3</span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-config"><a href="#val-config" class="anchor"></a><code><span><span class="keyword">val</span> config : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cnt_d"><a href="#val-cnt_d" class="anchor"></a><code><span><span class="keyword">val</span> cnt_d : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-adm_file"><a href="#val-adm_file" class="anchor"></a><code><span><span class="keyword">val</span> adm_file : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-src_d"><a href="#val-src_d" class="anchor"></a><code><span><span class="keyword">val</span> src_d : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-etc_d"><a href="#val-etc_d" class="anchor"></a><code><span><span class="keyword">val</span> etc_d : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-config_d"><a href="#val-config_d" class="anchor"></a><code><span><span class="keyword">val</span> config_d : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lang_d"><a href="#val-lang_d" class="anchor"></a><code><span><span class="keyword">val</span> lang_d : <span><a href="#type-my_fun_3">my_fun_3</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bpath"><a href="#val-bpath" class="anchor"></a><code><span><span class="keyword">val</span> bpath : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-portraits_d"><a href="#val-portraits_d" class="anchor"></a><code><span><span class="keyword">val</span> portraits_d : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-images_d"><a href="#val-images_d" class="anchor"></a><code><span><span class="keyword">val</span> images_d : <span><a href="#type-my_fun_2">my_fun_2</a> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Function called to initialize path functions based on the reorg flag.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_reorg_base"><a href="#val-is_reorg_base" class="anchor"></a><code><span><span class="keyword">val</span> is_reorg_base : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>returns true if mybase.gwb/config/mybase.gwf exists</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-test_reorg"><a href="#val-test_reorg" class="anchor"></a><code><span><span class="keyword">val</span> test_reorg : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>set reorg to true if !reorg of is_reorg_base; then calls init</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_base_exists"><a href="#val-check_base_exists" class="anchor"></a><code><span><span class="keyword">val</span> check_base_exists : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check if database exists and exit if so (unless -f flag is set)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_base_and_config"><a href="#val-create_base_and_config" class="anchor"></a><code><span><span class="keyword">val</span> create_base_and_config : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Create base directory and configuration.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Default"><a href="#module-Default" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Default/index.html">Default</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Legacy"><a href="#module-Legacy" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Legacy/index.html">Legacy</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-output_error"><a href="#val-output_error" class="anchor"></a><code><span><span class="keyword">val</span> output_error : 
  <span><span class="optlabel">?headers</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?content</span>:<a href="../../Adef/index.html#type-safe_string">Adef.safe_string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Def/index.html#type-httpStatus">Def.httpStatus</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>If <code>?content</code> is not set, sends page content from <code>/etc/&lt;status-code&gt;-&lt;lang&gt;.html</code>. If the current lang is not available, use `en`</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_semi_public"><a href="#val-is_semi_public" class="anchor"></a><code><span><span class="keyword">val</span> is_semi_public : <span><a href="../../Geneweb_db/Driver/index.html#type-person">Geneweb_db.Driver.person</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>determines if the person has SemiPublic status</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-split_key"><a href="#val-split_key" class="anchor"></a><code><span><span class="keyword">val</span> split_key : <span>string <span class="arrow">&#45;&gt;</span></span> string * string * string</span></code></div><div class="spec-doc"><p>split a key of the form first_name.occ surname into its three components the .occ part may be absent. No spaces in first_name and surnames</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_related"><a href="#val-is_related" class="anchor"></a><code><span><span class="keyword">val</span> is_related : 
  <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-base">Geneweb_db.Driver.base</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-person">Geneweb_db.Driver.person</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>determines if the person is a descendant a sibling or an ancestor of conf.userkey. conf.userkey is the person visiting the base the search for ancestors is limited to 3 generations</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_date"><a href="#val-has_date" class="anchor"></a><code><span><span class="keyword">val</span> has_date : <span><a href="../../Geneweb_db/Driver/index.html#type-base">Geneweb_db.Driver.base</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Geneweb_db/Driver/index.html#type-person">Geneweb_db.Driver.person</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>person has at least one date (birth, baptism, marriage, death, burial)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-p_auth"><a href="#val-p_auth" class="anchor"></a><code><span><span class="keyword">val</span> p_auth : 
  <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-base">Geneweb_db.Driver.base</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-person">Geneweb_db.Driver.person</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>Calculate the access rights to the person's information in according to his age. Returns (in the order of the tests) :</p><ul><li>`true` if requester is wizard or friend or person is public</li><li>`true` if person has at least one title and <i>public_if_title</i> is set to <i>yes</i> in gwf config file</li><li>`false` if person is alive and <i>private_years</i> &gt; 0</li><li>`true` if person is older (depending on the date of birth or baptism date) then <i>privates_years</i></li><li>`false` if person is younger (depending on the date of birth or baptism date) then <i>privates_years</i></li><li>`true` if person has been deceased for more than <i>privates_years</i></li><li>`false` if person has been deceased for less than <i>privates_years</i></li><li>`true` if person is between 80 and 120 years old and he is not beeing private and <i>public_if_no_date</i> is set to <i>yes</i> in gwf config file</li><li>`true` if person has been married for more than <i>private_years</i></li><li>`false` otherwise</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-p_auth_sp"><a href="#val-p_auth_sp" class="anchor"></a><code><span><span class="keyword">val</span> p_auth_sp : 
  <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-base">Geneweb_db.Driver.base</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Geneweb_db/Driver/index.html#type-person">Geneweb_db.Driver.person</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>returns p_auth or true if both user and p are SemiPublic</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wrap_output"><a href="#val-wrap_output" class="anchor"></a><code><span><span class="keyword">val</span> wrap_output : <span><a href="../Config/index.html#type-config">Config.config</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Adef/index.html#type-safe_string">Adef.safe_string</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Display in a very basic HTML doc, with no CSS or JavaScript.</p></div></div></div></body></html>
